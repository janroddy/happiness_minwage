!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3=n.d3||{}))}(this,function(n){"use strict";function r(n,r,t,e,u){for(var o=n.length,i=0,a=0,f=0;f<o;f++){var c=n[f],h=r(c),l=t(c),g=u(h);i+=Math.pow(l-g,2),a+=Math.pow(l-e/o,2)}return 1-i/a}function t(n){return 180*Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])/Math.PI}function e(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function u(n,r,u){function o(n){return[n,u(n)]}for(var i=.01,a=[o(n),o(r)],f=0;function(n){f++;for(var r=n.length,u=!1,a=0;a<r-1;a++){var c=n[a],h=n[a+1],l=e([c,h]),g=o(l[0]),s=t([c,l]),v=t([c,g]);Math.abs(s-v)>i&&(n.splice(a+1,0,g),u=!0)}return u}(a)&&f<1e4;);return a}function o(){function n(n){for(var i=n.length,a=0,f=0,c=0,h=0,l=0,g=t?+t[0]:1/0,s=t?+t[1]:-1/0,v=0;v<i;v++){var M=n[v],p=e(M,v,n),d=o(M,v,n);null!=p&&isFinite(p)&&null!=d&&isFinite(d)&&(a+=d,f+=p*p*d,c+=d*Math.log(d),h+=p*d*Math.log(d),l+=p*d,t||(p<g&&(g=p),p>s&&(s=p)))}var w=a*f-l*l,b=Math.exp((f*c-l*h)/w),x=(a*h-l*c)/w,F=function(n){return b*Math.exp(x*n)},y=u(g,s,F);return y.a=b,y.b=x,y.predict=F,y.rSquared=r(n,e,o,a,F),y}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function i(){function n(n){for(var o=n.length,i=0,a=0,f=0,c=0,h=0,l=t?+t[0]:1/0,g=t?+t[1]:-1/0,s=0;s<o;s++){var v=n[s],M=e(v,s,n),p=u(v,s,n);null!=M&&isFinite(M)&&null!=p&&isFinite(p)&&(i++,a+=M,f+=p,c+=M*p,h+=M*M,t||(M<l&&(l=M),M>g&&(g=M)))}o=i;var d=o*c,w=a*f,b=o*h,x=a*a,F=(d-w)/(b-x),y=f,m=F*a,q=(y-m)/o,S=function(n){return F*n+q},P=r(n,e,u,f,S),L=[[l,l*F+q],[g,g*F+q]];return L.a=F,L.b=q,L.predict=S,L.rSquared=P,L}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function a(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function f(n,r){return n.sort(function(n,t){return r(n)-r(t)})}function c(){function n(n){var i=n.length,c=Math.max(2,~~(e*i)),s=[],v=[],M=[],p=[],d=[];f(n=n.slice(),r);for(var w=0,b=0;w<i;++w){var x=n[w],F=r(x,w,n),y=t(x,w,n);null!=F&&isFinite(F)&&null!=y&&isFinite(y)&&(s[b]=F,v[b]=y,M[b]=0,p[b]=0,d[b]=1,++b)}for(var m=s.length,q=-1;++q<=u;){for(var S=[0,c-1],P=0;P<m;++P){for(var L=s[P],j=S[0],k=S[1],_=L-s[j]>s[k]-L?j:k,E=0,I=0,O=0,Q=0,z=0,A=1/Math.abs(s[_]-L||1),B=j;B<=k;++B){var C=s[B],D=v[B],G=h(Math.abs(L-C)*A)*d[B],H=C*G;E+=G,I+=H,O+=C*H,Q+=D*G,z+=D*H}var J=I/E,K=Q/E,N=z/E,R=O/E,T=Math.sqrt(Math.abs(R-J*J))<o?0:(N-J*K)/(R-J*J),U=K-T*J;M[P]=T*L+U,p[P]=Math.abs(v[P]-M[P]),l(s,P+1,S)}if(q===u)break;var V=a(p);if(Math.abs(V)<o)break;for(var W,X,Y=0;Y<m;++Y)W=p[Y]/(6*V),d[Y]=W>=1?o:(X=1-W*W)*X}return g(s,M)}var r=function(n){return n[0]},t=function(n){return n[1]},e=.3,u=2,o=1e-12;return n.bandwidth=function(r){return arguments.length?(e=r,n):e},n.x=function(t){return arguments.length?(r=t,n):r},n.y=function(r){return arguments.length?(t=r,n):t},n}function h(n){return(n=1-n*n*n)*n*n}function l(n,r,t){var e=n[r],u=t[0],o=t[1]+1;if(!(o>=n.length))for(;r>u&&n[o]-e<=e-n[u];)t[0]=++u,t[1]=o,++o}function g(n,r){for(var t,e=n.length,u=[],o=0,i=0,a=[];o<e;++o)t=n[o],a[0]===t?a[1]+=(r[o]-a[1])/++i:(i=0,a=[t,r[o]],u.push(a));return u}function s(){function n(n){for(var i=n.length,a=0,f=0,c=0,h=0,l=0,g=t?+t[0]:1/0,s=t?+t[1]:-1/0,v=0;v<i;v++){var M=n[v],p=e(M,v,n),d=o(M,v,n);null!=p&&isFinite(p)&&null!=d&&isFinite(d)&&(a++,f+=Math.log(p),c+=d*Math.log(p),h+=d,l+=Math.pow(Math.log(p),2),t||(p<g&&(g=p),p>s&&(s=p)))}i=a;var w=(i*c-h*f)/(i*l-f*f),b=(h-w*f)/i,x=function(n){return w*Math.log(n)+b},F=u(g,s,x);return F.a=w,F.b=b,F.predict=x,F.rSquared=r(n,e,o,h,x),F}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function v(){function n(n){for(var a=[],f=0,c=t?+t[0]:1/0,h=t?+t[1]:-1/0,l=n.length,g=0;g<l;g++){var s=n[g],v=e(s,g,n),p=o(s,g,n);null!=v&&isFinite(v)&&null!=p&&isFinite(p)&&(a[g]=[v,p],f+=p,t||(v<c&&(c=v),v>h&&(h=v)))}l=a.length;for(var d=[],w=[],b=i+1,x=0,F=0,y=0;y<b;y++){for(var m=0;m<l;m++)x+=Math.pow(a[m][0],y)*a[m][1];d.push(x),x=0;for(var q=[],S=0;S<b;S++){for(var P=0;P<l;P++)F+=Math.pow(a[P][0],y+S);q[S]=F,F=0}w.push(q)}w.push(d);var L=M(w,b),j=function(n){return L.reduce(function(r,t,e){return r+t*Math.pow(n,e)},0)},k=u(c,h,j);return k.coefficients=L,k.predict,k.rSquared=r(n,e,o,f,j),k}var t,e=function(n){return n[0]},o=function(n){return n[1]},i=3;return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n.order=function(r){return arguments.length?(i=r,n):i},n}function M(n,r){for(var t=n.length-1,e=[r],u=0;u<t;u++){for(var o=u,i=u+1;i<t;i++)Math.abs(n[u][i])>Math.abs(n[u][o])&&(o=i);for(var a=u;a<t+1;a++){var f=n[a][u];n[a][u]=n[a][o],n[a][o]=f}for(var c=u+1;c<t;c++)for(var h=t;h>=u;h--)n[h][c]-=n[h][u]*n[u][c]/n[u][u]}for(var l=t-1;l>=0;l--){for(var g=0,s=l+1;s<t;s++)g+=n[s][l]*e[s];e[l]=(n[t][l]-g)/n[l][l]}return e}function p(){function n(n){for(var i=n.length,a=0,f=0,c=0,h=0,l=0,g=0,s=t?+t[0]:1/0,v=t?+t[1]:-1/0,M=0;M<i;M++){var p=n[M],d=e(p,M,n),w=o(p,M,n);null!=d&&isFinite(d)&&null!=w&&isFinite(w)&&(a++,f+=Math.log(d),c+=Math.log(w)*Math.log(d),h+=Math.log(w),l+=Math.pow(Math.log(d),2),g+=w,t||(d<s&&(s=d),d>v&&(v=d)))}i=a;var b=(i*c-f*h)/(i*l-Math.pow(f,2)),x=Math.exp((h-b*f)/i),F=function(n){return x*Math.pow(n,b)},y=u(s,v,F);return y.a=x,y.b=b,y.predict=F,y.rSquared=r(n,e,o,g,F),y}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function d(){function n(n){for(var i=n.length,a=0,f=0,c=0,h=0,l=0,g=0,s=0,v=0,M=t?+t[0]:1/0,p=t?+t[1]:-1/0,d=0;d<i;d++){var w=n[d],b=e(w,d,n),x=o(w,d,n),F=Math.pow(b,2);null!=b&&isFinite(b)&&null!=x&&isFinite(x)&&(a++,f+=b,c+=x,h+=F,l+=Math.pow(b,3),g+=Math.pow(b,4),s+=b*x,v+=F*x,t||(b<M&&(M=b),b>p&&(p=b)))}i=a;var y=h-Math.pow(f,2)/i,m=s-f*c/i,q=l-h*f/i,S=v-h*c/i,P=g-Math.pow(h,2)/i,L=(S*y-m*q)/(y*P-Math.pow(q,2)),j=(m*P-S*q)/(y*P-Math.pow(q,2)),k=c/i-j*(f/i)-L*(h/i),_=function(n){return L*Math.pow(n,2)+j*n+k},E=u(M,p,_);return E.a=L,E.b=j,E.c=k,E.predict=_,E.rSquared=r(n,e,o,c,_),E}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}n.regressionExp=o,n.regressionLinear=i,n.regressionLoess=c,n.regressionLog=s,n.regressionPoly=v,n.regressionPow=p,n.regressionQuad=d,Object.defineProperty(n,"__esModule",{value:!0})});